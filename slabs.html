<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Commission Ready Slabs — Faheem Woodworks</title>
  <style>
    body {font-family: Inter, system-ui, sans-serif; background:#0b0f1a; color:#e5e7eb; margin:0; padding:2rem;}
    h1,h2 {text-align:center}
    h1 {font-size:clamp(1.6rem,4vw,2.2rem); margin: .5rem 0 1.25rem}
    h2 {font-size: 2rem; margin: 2rem 0 1rem;}

    /* ===== Branded Navbar (matches other pages) ===== */
    .navbar {
      display:flex; justify-content:space-between; align-items:center;
      background:#0b0f1a; padding:0.75rem 2rem; border-bottom:1px solid rgba(255,255,255,.06);
      margin:-2rem -2rem 1rem; /* stretch full width because body has padding */
    }
    .navbar-left { display:flex; align-items:center; gap:.75rem; }
    .navbar-left img { height:40px; width:auto; border-radius:6px; }
    .navbar-left span { font-weight:700; font-size:1.2rem; color:#fff; }
    .navbar-right a { margin-left:1.5rem; color:#22c55e; text-decoration:none; font-weight:600; }
    .navbar-right a:hover { text-decoration:underline; }
    /* active page highlight */
    .navbar-right a[aria-current="page"]{ text-decoration:underline; }

    /* Slider */
    .slider {position: relative; border-radius: 20px; overflow: hidden; background: #111827; max-width: 900px; margin: 2rem auto; box-shadow: 0 8px 30px rgba(0,0,0,.5);}
    .slider-viewport {aspect-ratio: 4/3; display: flex; justify-content: center; align-items: center; background: radial-gradient(circle at center, #1f2937, #0b0f1a);}
    .slider-viewport img {max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 12px; transition: opacity .4s ease;}
    .slider-btn {position: absolute; top: 50%; transform: translateY(-50%); display: grid; place-items: center; width: 46px; height: 46px; border-radius: 50%; border: none; background: rgba(0,0,0,.5); cursor: pointer; color: #fff; font-size: 22px; backdrop-filter: blur(6px); transition: background .3s ease, transform .2s ease;}
    .slider-btn:hover {background: rgba(0,0,0,.75); transform: scale(1.05);}
    .slider-btn.left {left: 12px;}
    .slider-btn.right {right: 12px;}
    .slider-dots {position: absolute; bottom: 12px; left: 0; right: 0; display: flex; gap: .5rem; justify-content: center;}
    .slider-dots button {width: 10px; height: 10px; border-radius: 50%; border: none; background: rgba(255,255,255,.4); cursor: pointer; transition: background .3s ease, transform .3s ease;}
    .slider-dots button:hover {transform: scale(1.2);}
    .slider-dots button[aria-current="true"] {background: #22c55e;}
    .caption {text-align: center; padding-top: .75rem; font-size: .95rem; color: #9ca3af;}
  </style>
</head>
<body>

  <!-- Branded navbar -->
  <nav class="navbar" aria-label="Primary">
    <div class="navbar-left">
      <img src="images/faheemwoodworks.jpg" alt="Faheem Woodworks logo" />
      <span>Faheem Woodworks</span>
    </div>
    <div class="navbar-right">
      <a href="index.html">Home</a>
      <a href="projects.html">Completed Projects</a>
      <a href="slabs.html" aria-current="page">Commission Ready</a>
    </div>
  </nav>

  <h1>Commission Ready Slabs</h1>

  <h2>Myrtlewood Slab Showcase</h2>
  <div class="slider" data-folder="images/myrtle_1/" data-title="Myrtlewood slab">
    <button class="slider-btn left" aria-label="Previous photo" data-dir="-1">&#10094;</button>
    <div class="slider-viewport"><img class="slide-img" alt="Loading…"/></div>
    <button class="slider-btn right" aria-label="Next photo" data-dir="1">&#10095;</button>
    <div class="slider-dots" aria-hidden="true"></div>
  </div><div class="caption"></div>

  <h2>Maple Slab Showcase</h2>
  <div class="slider" data-folder="images/maple_1/" data-title="Maple slab">
    <button class="slider-btn left" aria-label="Previous photo" data-dir="-1">&#10094;</button>
    <div class="slider-viewport"><img class="slide-img" alt="Loading…"/></div>
    <button class="slider-btn right" aria-label="Next photo" data-dir="1">&#10095;</button>
    <div class="slider-dots" aria-hidden="true"></div>
  </div><div class="caption"></div>

  <h2>Myrtlewood Slab Showcase 2</h2>
  <div class="slider" data-folder="images/myrtle_2/" data-title="Myrtlewood slab">
    <button class="slider-btn left" aria-label="Previous photo" data-dir="-1">&#10094;</button>
    <div class="slider-viewport"><img class="slide-img" alt="Loading…"/></div>
    <button class="slider-btn right" aria-label="Next photo" data-dir="1">&#10095;</button>
    <div class="slider-dots" aria-hidden="true"></div>
  </div><div class="caption"></div>

  <h2>Walnut Slab Showcase</h2>
  <div class="slider" data-folder="images/walnut_1/" data-title="Walnut slab">
    <button class="slider-btn left" aria-label="Previous photo" data-dir="-1">&#10094;</button>
    <div class="slider-viewport"><img class="slide-img" alt="Loading…"/></div>
    <button class="slider-btn right" aria-label="Next photo" data-dir="1">&#10095;</button>
    <div class="slider-dots" aria-hidden="true"></div>
  </div><div class="caption"></div>

  <script>
    function probe(url, timeout=6000){
      return new Promise(resolve=>{
        const img = new Image(); let done=false;
        const timer=setTimeout(()=>{ if(!done){ done=true; img.src=''; resolve(false);}}, timeout);
        img.onload=()=>{ if(!done){ done=true; clearTimeout(timer); resolve(true);} };
        img.onerror=()=>{ if(!done){ done=true; clearTimeout(timer); resolve(false);} };
        img.src=url;
      });
    }
    async function discoverFiles(folder){
      try{
        const res = await fetch(folder + 'manifest.txt', {cache:'no-store'});
        if(res.ok){
          const text = await res.text();
          const listed = text.split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
          const verified = [];
          for(const f of listed){ if(await probe(folder + f)) verified.push(f); }
          if(verified.length) return verified;
        }
      }catch(_){}
      const parts = folder.replace(/\/$/,'').split('/');
      const folderName = parts[parts.length-1];
      const basePrefix = folderName.split('_')[0];
      const numPart = (folderName.match(/\d+/) || [''])[0];
      const exts = ['webp','jpg','jpeg','png'];
      const files = [];
      for(let i=1;i<=120;i++){
        let found=false;
        const names=[`${basePrefix}_${i}`,`${folderName}_${i}`,...(numPart?[`${numPart}${basePrefix}_${i}`]:[]),`${i}`];
        for(const stem of names){
          for(const ext of exts){
            const cand = `${stem}.${ext}`;
            if(await probe(folder + cand)){ files.push(cand); found=true; break; }
          }
          if(found) break;
        }
        if(!found && files.length>0) break;
      }
      return files;
    }
    function wireSlider(sliderEl, files){
      const folder = sliderEl.dataset.folder;
      const title  = sliderEl.dataset.title || 'Gallery image';
      const imgEl  = sliderEl.querySelector('img.slide-img');
      const dotsEl = sliderEl.querySelector('.slider-dots');
      const captionEl = sliderEl.nextElementSibling?.classList.contains('caption') ? sliderEl.nextElementSibling : null;
      let idx = 0;
      function renderDots(){
        dotsEl.innerHTML='';
        files.forEach((_,i)=>{
          const b=document.createElement('button'); b.type='button';
          if(i===idx) b.setAttribute('aria-current','true');
          b.addEventListener('click',()=>{idx=i;update(true)});
          dotsEl.appendChild(b);
        });
      }
      function update(animate){
        const src = folder + files[idx];
        if(animate){ imgEl.style.opacity=0; }
        setTimeout(()=>{ imgEl.src = src; imgEl.alt = `${title} photo ${idx+1}`;
          if(captionEl) captionEl.textContent = `${title} photo ${idx+1}`; imgEl.style.opacity=1; }, animate?180:0);
        [...dotsEl.children].forEach((d,i)=> d.toggleAttribute('aria-current', i===idx));
      }
      function next(delta){ idx = (idx + delta + files.length) % files.length; update(true); }
      sliderEl.querySelectorAll('.slider-btn').forEach(btn=>btn.addEventListener('click',()=> next(parseInt(btn.dataset.dir,10))));
      sliderEl.tabIndex=0;
      sliderEl.addEventListener('keydown',e=>{ if(e.key==='ArrowRight') next(1); if(e.key==='ArrowLeft') next(-1); });
      let sx=null; sliderEl.addEventListener('touchstart',e=>{sx=e.touches[0].clientX;});
      sliderEl.addEventListener('touchend',e=>{ if(sx==null) return; const dx=e.changedTouches[0].clientX - sx;
        if(Math.abs(dx)>40){ next(dx<0?1:-1);} sx=null;});
      renderDots(); update(false);
    }
    (async function(){
      const sliders = document.querySelectorAll('.slider[data-folder]');
      for(const el of sliders){
        const files = await discoverFiles(el.dataset.folder);
        if(files.length) wireSlider(el, files);
        else el.querySelector('img').alt = 'No images found';
      }
    })();
  </script>
</body>
</html>

